{"version":3,"sources":["containers/MyOrders/MyOrders.module.css","components/Orders/Orders.module.css","redux/myOrders/myOrdersActions.js","redux/myOrders/myOrdersSelector.js","components/Orders/Orders.jsx","containers/MyOrders/MyOrders.jsx","components/customComponents/Popupbox/PopupBox.jsx","components/customComponents/Popupbox/PopupBox.module.css","components/customComponents/Backdrop/Backdrop.jsx","components/customComponents/Backdrop/Backdrop.module.css"],"names":["module","exports","fetchOrders","currentUser","dispatch","type","actionType","axios","get","then","data","fetchedOrders","key","push","id","details","ingredients","totalPrice","time","userId","orders","currentUserOrder","filter","order","uid","payload","catch","error","fetchOrdersFailure","deleteOrder","orderId","delete","deleteOrderSuccess","deleteOrderFailure","selectMyOrders","state","myOrders","selectOrders","createSelector","selectLoading","loading","selectError","selectOrdersQuantity","length","Orders","showPopup","togglePopup","setState","this","props","ingredientsCount","name","count","Backdrop","show","click","className","styles","Confirm","Button","primary","Order","Burger","Content","Date","toDateString","map","Count","Delete","onClick","Component","mapStateToProps","createStructuredSelector","connect","MyOrders","quantity","Title","NoOrder","PureComponent","user","PopupBox","children"],"mappings":"mGACAA,EAAOC,QAAU,CAAC,SAAW,2BAA2B,QAAU,0BAA0B,MAAQ,0B,oBCApGD,EAAOC,QAAU,CAAC,MAAQ,sBAAsB,OAAS,uBAAuB,QAAU,wBAAwB,MAAQ,sBAAsB,OAAS,uBAAuB,QAAU,0B,yMCgB7KC,EAAc,SAAEC,GAC3B,OAAO,SAAAC,GACDD,IACJC,EAjBmC,CACrCC,KAAMC,MAiBJC,IAAMC,IAAI,sDACTC,MAAM,YAAe,IAAZC,EAAW,EAAXA,KACFC,EAAgB,GACtB,IAAK,IAAIC,KAAOF,EACdC,EAAcE,KAAK,CACjBC,GAAIF,EACJG,QAASL,EAAKE,GAAKG,QACnBC,YAAaN,EAAKE,GAAKI,YACvBC,WAAYP,EAAKE,GAAKK,WACtBC,KAAMR,EAAKE,GAAKM,KAChBC,OAAQT,EAAKE,GAAKO,SAGtB,IA3B4BC,EA2BtBC,EAAmBV,EAAcW,QAAQ,SAAAC,GAAK,OAAIA,EAAMJ,SAAWhB,EAAYqB,OACrFpB,GA5B4BgB,EA4BEC,EA5BS,CAC3ChB,KAAMC,IACNmB,QAASL,QA4BNM,OAAM,SAAAC,GAAK,OAAIvB,EAzBc,SAAAuB,GAAK,MAAK,CAC1CtB,KAAMC,IACNmB,QAASE,GAuBmBC,CAAmBD,UAmBpCE,EAAc,SAAAC,GACzB,OAAO,SAAA1B,GACLA,EAhBmC,CACrCC,KAAMC,MAgBJC,IAAMwB,OAAN,wDAA8DD,EAA9D,UACGrB,MAAM,kBAAML,EAde,SAAA0B,GAAO,MAAK,CAC5CzB,KAAMC,IACNmB,QAASK,GAYkBE,CAAmBF,OACzCJ,OAAO,SAAAC,GAAK,OAAIvB,EAVW,SAAAuB,GAAK,MAAK,CAC1CtB,KAAMC,IACNmB,QAASE,GAQsBM,CAAmBN,SC3D9CO,EAAiB,SAAAC,GAAK,OAAIA,EAAMC,UAEzBC,EAAeC,YAC1B,CAACJ,IACD,SAAAE,GAAQ,OAAIA,EAAShB,UAGVmB,EAAgBD,YAC3B,CAACJ,IACD,SAAAE,GAAQ,OAAIA,EAASI,WAGVC,EAAcH,YACzB,CAACJ,IACD,SAAAE,GAAQ,OAAIA,EAAST,SAGVe,EAAuBJ,YAClC,CAACD,IACD,SAAAjB,GAAM,OAAIA,EAAOuB,UCNbC,E,4MACJT,MAAQ,CACNU,WAAW,G,EAGbC,YAAc,WACZ,EAAKC,UAAS,SAAAZ,GAAK,MAAK,CACtBU,WAAYV,EAAMU,e,uDAIZ,IAAD,OACCA,EAAcG,KAAKb,MAAnBU,UADD,EAEoDG,KAAKC,MAAxDnC,EAFD,EAECA,GAAII,EAFL,EAEKA,KAAMD,EAFX,EAEWA,WAAYD,EAFvB,EAEuBA,YAAaa,EAFpC,EAEoCA,YAEvCqB,EAAmB,GACvB,IAAK,IAAItC,KAAOI,EACdkC,EAAiBrC,KAAK,CAAEsC,KAAMvC,EAAKwC,MAAOpC,EAAYJ,KAGxD,OACE,6BACE,kBAACyC,EAAA,EAAD,CAAUC,KAAMT,EAAWU,MAAO,kBAAM,EAAKT,iBAC7C,kBAAC,IAAD,CAAUQ,KAAMT,GACd,uBAAGW,UAAWC,IAAOC,SAArB,2BACA,6BACE,kBAACC,EAAA,EAAD,CAAQC,SAAO,EAACL,MAAO,kBAAM1B,EAAYf,KAAzC,OACA,kBAAC6C,EAAA,EAAD,CAAQJ,MAAO,kBAAM,EAAKT,gBAA1B,YAGJ,yBAAKlC,IAAKE,EAAI0C,UAAWC,IAAOI,OAC9B,yBAAKL,UAAWC,IAAOK,QACrB,kBAAC,IAAD,OAEF,yBAAKN,UAAWC,IAAOM,SACrB,0CAAiB,IAAIC,KAAK9C,GAAM+C,gBAChC,wCAAchD,GACbiC,EAAiBgB,KAAK,gBAAGf,EAAH,EAAGA,KAAMC,EAAT,EAASA,MAAT,OACrB,0BAAMxC,IAAKuC,EAAMK,UAAWC,IAAOU,OAAQhB,EAA3C,MAAoDC,OAGxD,yBAAKI,UAAWC,IAAOW,OAAQC,QAAS,kBAAM,EAAKvB,gBAAnD,gB,GAzCWwB,aAgDfC,EAAkBC,YAAyB,CAC/ChC,QAASD,IAOIkC,cAAQF,GAJI,SAAAnE,GAAQ,MAAK,CACtCyB,YAAa,SAAAN,GAAK,OAAInB,EAAUyB,EAAYN,QAG/BkD,CAA6C7B,GC7DtD8B,E,kLACiB,IAAD,EACmB1B,KAAKC,MAAlC9C,EADU,EACVA,YAAaD,EADH,EACGA,YACjBC,GAAaD,EAAaC,K,+BAGtB,IAAD,EACsB6C,KAAKC,MAA1B7B,EADD,EACCA,OAAQuD,EADT,EACSA,SAEhB,OACE,yBAAKnB,UAAWC,IAAOiB,UACrB,wBAAIlB,UAAWC,IAAOmB,OAAtB,mBACA,uBAAGpB,UAAWC,IAAOmB,OAArB,2BAAqDD,GACnDvD,EAAOuB,QAAU,EAAI,uBAAGa,UAAWC,IAAOoB,SAArB,aAA8CzD,EAAO8C,KAAK,SAAA3C,GAAK,OAAI,kBAAC,EAAD,eAAOX,IAAKW,EAAMT,IAAQS,Y,GAbrGuD,iBAmBjBP,EAAkBC,YAAyB,CAC/CpD,OAAQiB,EACRG,QAASD,EACTZ,MAAOc,EACPkC,SAAUjC,IAOG+B,sBAAQF,GAJI,SAAAnE,GAAQ,MAAK,CACtCF,YAAa,SAAA6E,GAAI,OAAI3E,EAAUF,EAAa6E,QAG/BN,CAA6CC,I,gCCxC5D,qCAWeM,IAPE,SAAC,GAAD,IAAG1B,EAAH,EAAGA,KAAM2B,EAAT,EAASA,SAAT,OACf3B,GACA,yBAAKE,UAAWC,IAAOuB,UACpBC,K,mBCNLjF,EAAOC,QAAU,CAAC,SAAW,6B,gCCD7B,qCAQeoD,IAJE,SAAC,GAAD,IAAGC,EAAH,EAAGA,KAAMC,EAAT,EAASA,MAAT,OACfD,GAAQ,yBAAKE,UAAWC,IAAOJ,SAAUgB,QAASd,M,mBCJpDvD,EAAOC,QAAU,CAAC,SAAW","file":"static/js/9.0843f058.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"MyOrders\":\"MyOrders_MyOrders__Rhr_i\",\"NoOrder\":\"MyOrders_NoOrder__3lGSi\",\"Title\":\"MyOrders_Title__2KTbk\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Order\":\"Orders_Order__gb_97\",\"Burger\":\"Orders_Burger__3g559\",\"Content\":\"Orders_Content__3qLAc\",\"Count\":\"Orders_Count__rjyxm\",\"Delete\":\"Orders_Delete__35ekZ\",\"Confirm\":\"Orders_Confirm__2N4d9\"};","import axios from 'axios';\r\nimport * as actionType from './myOrdersActionType';\r\n\r\nexport const fetchOrdersStart = () => ({\r\n  type: actionType.FETCH_ORDERS_START\r\n});\r\n\r\nexport const fetchOrdersSuccess = orders => ({\r\n  type: actionType.FETCH_ORDERS_SUCCESS,\r\n  payload: orders\r\n});\r\n\r\nexport const fetchOrdersFailure = error => ({\r\n  type: actionType.FETCH_ORDERS_FAILURE,\r\n  payload: error\r\n});\r\n\r\nexport const fetchOrders = ( currentUser ) => {\r\n  return dispatch => {\r\n    if (currentUser) {\r\n    dispatch( fetchOrdersStart() );\r\n    axios.get(\"https://my-burger-8b19a.firebaseio.com/orders.json\")\r\n    .then( ({ data }) => {\r\n      const fetchedOrders = [];\r\n      for (let key in data) {\r\n        fetchedOrders.push({\r\n          id: key,\r\n          details: data[key].details,\r\n          ingredients: data[key].ingredients,\r\n          totalPrice: data[key].totalPrice,\r\n          time: data[key].time,\r\n          userId: data[key].userId\r\n        })\r\n      }\r\n      const currentUserOrder = fetchedOrders.filter( order => order.userId === currentUser.uid );\r\n      dispatch( fetchOrdersSuccess( currentUserOrder ) )\r\n    } )\r\n    .catch(error => dispatch( fetchOrdersFailure(error) ));\r\n    }\r\n  };\r\n};\r\n\r\nexport const deleteOrderStart = () => ({\r\n  type: actionType.DELETE_ORDER_START\r\n});\r\n\r\nexport const deleteOrderSuccess = orderId => ({\r\n  type: actionType.DELETE_ORDER_SUCCESS,\r\n  payload: orderId\r\n});\r\n\r\nexport const deleteOrderFailure = error => ({\r\n  type: actionType.DELETE_ORDER_FAILURE,\r\n  payload: error\r\n});\r\n\r\nexport const deleteOrder = orderId => {\r\n  return dispatch => {\r\n    dispatch( deleteOrderStart() );\r\n    axios.delete(`https://my-burger-8b19a.firebaseio.com/orders/${orderId}.json`)\r\n      .then( () => dispatch( deleteOrderSuccess(orderId) ))\r\n      .catch( error => dispatch( deleteOrderFailure(error) ))\r\n  };\r\n};","import { createSelector } from 'reselect';\r\n\r\nconst selectMyOrders = state => state.myOrders;\r\n\r\nexport const selectOrders = createSelector(\r\n  [selectMyOrders],\r\n  myOrders => myOrders.orders\r\n);\r\n\r\nexport const selectLoading = createSelector(\r\n  [selectMyOrders],\r\n  myOrders => myOrders.loading\r\n);\r\n\r\nexport const selectError = createSelector(\r\n  [selectMyOrders],\r\n  myOrders => myOrders.error\r\n);\r\n\r\nexport const selectOrdersQuantity = createSelector(\r\n  [selectOrders],\r\n  orders => orders.length\r\n);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { createStructuredSelector } from 'reselect';\r\n\r\nimport styles from './Orders.module.css';\r\n\r\n\r\nimport Popupbox from '../customComponents/Popupbox/PopupBox';\r\nimport Backdrop from '../customComponents/Backdrop/Backdrop';\r\nimport Button from '../customComponents/Button/Button';\r\n\r\nimport { ReactComponent as BurgerLogo } from '../../assets/burger.svg';\r\nimport { deleteOrder } from '../../redux/myOrders/myOrdersActions';\r\nimport { selectLoading } from '../../redux/myOrders/myOrdersSelector';\r\n\r\nclass Orders extends Component {\r\n  state = {\r\n    showPopup: false\r\n  }\r\n\r\n  togglePopup = () => {\r\n    this.setState(state => ({\r\n      showPopup: !state.showPopup\r\n    }));\r\n  }\r\n\r\n  render() {\r\n    const { showPopup } = this.state;\r\n    const { id, time, totalPrice, ingredients, deleteOrder } = this.props;\r\n\r\n    let ingredientsCount = [];\r\n    for (let key in ingredients) {\r\n      ingredientsCount.push({ name: key, count: ingredients[key]})\r\n    }\r\n\r\n    return (\r\n      <div>\r\n        <Backdrop show={showPopup} click={() => this.togglePopup()}/>\r\n        <Popupbox show={showPopup}>\r\n          <p className={styles.Confirm}>Are you sure to delete?</p>\r\n          <div>\r\n            <Button primary click={() => deleteOrder(id)}>yes</Button>\r\n            <Button click={() => this.togglePopup()}>cancel</Button>\r\n          </div>\r\n        </Popupbox>\r\n        <div key={id} className={styles.Order}>\r\n          <div className={styles.Burger}>\r\n            <BurgerLogo />\r\n          </div>\r\n          <div className={styles.Content}>\r\n            <p>Ordered on: { new Date(time).toDateString()}</p>\r\n            <h4>Price: $ {totalPrice}</h4>\r\n            {ingredientsCount.map( ({ name, count }) => (\r\n              <span key={name} className={styles.Count}>{name} - {count}</span>\r\n            ))}\r\n          </div>\r\n          <div className={styles.Delete} onClick={() => this.togglePopup() }>&#10005;</div>\r\n        </div>\r\n      </div>\r\n    )\r\n  };\r\n}\r\n\r\nconst mapStateToProps = createStructuredSelector({\r\n  loading: selectLoading\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n  deleteOrder: order => dispatch( deleteOrder(order) )\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Orders);","import React, { PureComponent } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { createStructuredSelector } from 'reselect';\r\n\r\nimport styles from './MyOrders.module.css';\r\nimport Order from '../../components/Orders/Orders';\r\n\r\nimport { selectOrders, selectLoading, selectError, selectOrdersQuantity } from '../../redux/myOrders/myOrdersSelector';\r\nimport { fetchOrders } from '../../redux/myOrders/myOrdersActions';\r\n\r\nclass MyOrders extends PureComponent {\r\n  componentDidMount() {\r\n    const { currentUser, fetchOrders } = this.props;\r\n    if (currentUser) fetchOrders( currentUser );\r\n  }\r\n\r\n  render() {\r\n    const { orders, quantity } = this.props;\r\n\r\n    return (\r\n      <div className={styles.MyOrders}>\r\n        <h3 className={styles.Title}>Previous Orders</h3>\r\n        <p className={styles.Title}>Total number of orders: {quantity}</p>\r\n        { orders.length <= 0 ? <p className={styles.NoOrder}>no orders</p> : orders.map( order => <Order key={order.id} {...order}/> ) }\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = createStructuredSelector({\r\n  orders: selectOrders,\r\n  loading: selectLoading,\r\n  error: selectError,\r\n  quantity: selectOrdersQuantity\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n  fetchOrders: user => dispatch( fetchOrders( user ) )\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(MyOrders);","import React from 'react';\r\n\r\nimport styles from './PopupBox.module.css';\r\n\r\nconst PopupBox = ({ show, children }) => (\r\n  show && \r\n  <div className={styles.PopupBox}>\r\n    {children}\r\n  </div>\r\n);\r\n\r\nexport default PopupBox;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"PopupBox\":\"PopupBox_PopupBox__1yYVs\"};","import React from 'react';\r\n\r\nimport styles from './Backdrop.module.css';\r\n\r\nconst Backdrop = ({ show, click }) => (\r\n  show && <div className={styles.Backdrop} onClick={click}/>\r\n);\r\n\r\nexport default Backdrop;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Backdrop\":\"Backdrop_Backdrop__Wohmw\"};"],"sourceRoot":""}